/* ─────────────────────────────────────────────────────────────────────────────
   RIGHT PANEL - Floating Note Editor
   ───────────────────────────────────────────────────────────────────────────── */
.editorPanel {
	width: var(--editor-width);
	min-width: var(--editor-min-width);
	background: var(--bg-primary);
	border-left: 1px solid var(--border-light);
	display: flex;
	flex-direction: column;
	overflow: hidden;
	flex-shrink: 0;
}

.editorPane {
	flex: 1;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

.editorHeader {
	display: flex;
	align-items: center;
	justify-content: space-between;
	height: var(--header-height);
	padding: 0 var(--space-3) 0 var(--space-4);
	border-bottom: 1px solid var(--border-light);
	flex-shrink: 0;
}

.editorRibbon {
	display: flex;
	align-items: center;
	gap: var(--space-2);
	padding: 0 var(--space-3);
	height: 44px;
	border-bottom: 1px solid var(--border-light);
	background: transparent;
	flex-shrink: 0;
}

.ribbonGroup {
	display: inline-flex;
	align-items: center;
	gap: 2px;
	padding: 2px;
	border: 1px solid var(--border-light);
	border-radius: var(--radius-lg);
	background: var(--bg-primary);
}

.ribbonDivider {
	width: 1px;
	height: 22px;
	background: var(--border-light);
}

button.ribbonBtn {
	width: 32px;
	height: 32px;
	padding: 0;
	border-radius: var(--radius-md);
	color: var(--text-secondary);
}

button.ribbonBtn:hover {
	transform: none;
	background: var(--bg-hover);
	color: var(--text-primary);
}

button.ribbonBtn.active {
	background: var(--selection-bg-muted);
	color: var(--interactive-accent);
}

.ribbonWarning {
	margin-left: auto;
	font-size: var(--text-xs);
	color: var(--text-tertiary);
	padding-left: var(--space-2);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.editorTitle {
	font-size: var(--text-base);
	font-weight: var(--font-semibold);
	color: var(--text-primary);
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	flex: 1;
}

.editorActions {
	display: flex;
	align-items: center;
	gap: var(--space-1);
}

.editorMode {
	display: inline-flex;
	align-items: center;
	gap: 0;
	padding: 2px;
	border: 1px solid var(--border-light);
	border-radius: var(--radius-full);
	background: var(--bg-secondary);
	margin-right: var(--space-2);
}

.editorBody .tiptapHost {
	flex: 1;
	min-height: 0;
	overflow-y: auto;
	overflow-x: hidden;
	padding: var(--space-6) 0 var(--space-6);
	background: color-mix(in srgb, var(--bg-primary) 92%, var(--bg-secondary));
	display: flex;
	flex-direction: column;
}

.editorBody .tiptapHost > .tiptap {
	flex: 1;
}

.editorBody .tiptapContent {
	min-height: 100%;
	max-width: 780px;
	margin: 0 auto;
	padding: 0 var(--space-6) var(--space-6);
	font-size: 16px;
	letter-spacing: -0.005em;
	line-height: var(--leading-relaxed);
	outline: none;
	caret-color: var(--text-primary);
}

/* Back-compat if the host ends up being the ProseMirror element */
.editorBody .tiptap {
	min-height: 100%;
	max-width: 780px;
	margin: 0 auto;
	padding: var(--space-6) var(--space-6) var(--space-6);
	overflow: visible;
	line-height: var(--leading-relaxed);
	outline: none;
	caret-color: var(--text-primary);
}

.editorBody .tiptapContent > *:first-child,
.editorBody .tiptap > *:first-child {
	margin-top: 0;
}

.editorBody .tiptapContent > *:last-child,
.editorBody .tiptap > *:last-child {
	margin-bottom: 0;
}

.editorBody .tiptapContent p,
.editorBody .tiptap p {
	margin: 0 0 var(--space-3) 0;
}

.editorBody .tiptapContent ul,
.editorBody .tiptapContent ol,
.editorBody .tiptap ul,
.editorBody .tiptap ol {
	padding-left: 1.4em;
	margin: 0 0 var(--space-3) 0;
}

.editorBody .tiptapContent li,
.editorBody .tiptap li {
	margin: 0.25em 0;
}

.editorBody .tiptapContent h1,
.editorBody .tiptapContent h2,
.editorBody .tiptapContent h3,
.editorBody .tiptapContent h4,
.editorBody .tiptapContent h5,
.editorBody .tiptapContent h6,
.editorBody .tiptap h1,
.editorBody .tiptap h2,
.editorBody .tiptap h3,
.editorBody .tiptap h4,
.editorBody .tiptap h5,
.editorBody .tiptap h6 {
	margin: var(--space-4) 0 var(--space-2) 0;
	letter-spacing: -0.01em;
}

.editorBody .tiptapContent h1,
.editorBody .tiptap h1 {
	font-size: 1.5rem;
	line-height: 1.25;
}

.editorBody .tiptapContent h2,
.editorBody .tiptap h2 {
	font-size: 1.25rem;
	line-height: 1.3;
}

.editorBody .tiptapContent h3,
.editorBody .tiptap h3 {
	font-size: 1.1rem;
	line-height: 1.35;
}

.editorBody .tiptapContent h4,
.editorBody .tiptap h4 {
	font-size: 1rem;
	line-height: 1.4;
}

.editorBody .tiptapContent h5,
.editorBody .tiptap h5 {
	font-size: 0.925rem;
	line-height: 1.4;
}

.editorBody .tiptapContent h6,
.editorBody .tiptap h6 {
	font-size: 0.85rem;
	line-height: 1.45;
	color: var(--text-secondary);
}

.editorBody .tiptapContent blockquote,
.editorBody .tiptap blockquote {
	margin: 0 0 var(--space-4) 0;
	padding: var(--space-3) var(--space-4);
	border-left: 3px solid color-mix(in srgb, var(--interactive-accent) 60%, #bbb);
	background: var(--bg-secondary);
	border-radius: var(--radius-lg);
}

.editorBody .tiptapContent hr,
.editorBody .tiptap hr {
	border: none;
	border-top: 1px solid var(--border-light);
	margin: var(--space-5) 0;
}

.editorBody .tiptapContent code,
.editorBody .tiptap code {
	font-family: var(--font-mono);
	font-size: 0.9em;
	background: var(--bg-secondary);
	padding: 0 0.25em;
	border-radius: var(--radius-sm);
}

.editorBody .tiptapContent pre,
.editorBody .tiptap pre {
	font-family: var(--font-mono);
	background: var(--bg-secondary);
	padding: var(--space-3);
	border-radius: var(--radius-lg);
	overflow: auto;
}

.editorBody .tiptapContent a,
.editorBody .tiptap a {
	color: var(--link-color);
	text-decoration: none;
}

.editorBody .tiptapContent a:hover,
.editorBody .tiptap a:hover {
	color: var(--link-color-hover);
	text-decoration: underline;
}

.mdRawEditor {
	width: 100%;
	height: 100%;
	flex: 1;
	min-height: 0;
	border: none;
	border-radius: 0;
	padding: var(--space-4);
	background: transparent;
	color: var(--text-primary);
	font-family: var(--font-mono);
	font-size: var(--text-sm);
	line-height: var(--leading-relaxed);
	resize: none;
	overflow: auto;
}

.mdRawEditor:focus {
	outline: none;
	box-shadow: none;
}

.editorStatus {
	font-size: var(--text-xs);
	color: var(--text-tertiary);
	margin-right: var(--space-2);
}

.editorBody {
	flex: 1;
	min-height: 0;
	overflow: hidden;
	display: flex;
	flex-direction: column;
}

.editorBody .cm-editor {
	flex: 1;
	min-height: 0;
	font-family: var(--font-sans);
	font-size: var(--text-base);
}

.editorBody .cm-scroller {
	padding: var(--space-4);
	line-height: var(--leading-relaxed);
	overflow: auto;
}

.editorBody .cm-gutters {
	background: var(--bg-primary);
	border-right: 1px solid var(--border-light);
	color: var(--text-tertiary);
	font-size: var(--text-xs);
}

.editorEmpty {
	display: flex;
	align-items: center;
	justify-content: center;
	height: 100%;
	color: var(--text-tertiary);
	font-size: var(--text-sm);
}

.editorError {
	padding: var(--space-2) var(--space-3);
	font-size: var(--text-xs);
	color: var(--text-error);
	background: var(--feedback-error-bg);
}
