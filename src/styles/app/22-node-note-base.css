/* ─── Note Nodes (Sticky Notes) ─── */
.rfNodeNote {
	display: flex;
	flex-direction: column;
	gap: var(--space-2);
	/* Allow dynamic sizing via CSS variables */
	width: var(--base-width, 200px);
	height: var(--base-height, 140px);
	min-width: 140px;
	max-width: 420px;
	max-height: 420px;
	/* Softer, glassy card look */
	border-radius: 16px;
	border: 1px solid color-mix(in srgb, var(--border-default) 55%, transparent);
	background: color-mix(in srgb, var(--bg-primary) 78%, transparent);
	box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18), inset 0 1px 0
		rgba(255, 255, 255, 0.06);
	backdrop-filter: blur(12px);
	overflow: hidden;
}

/* Remove paper texture + folded corner for glass style */
.rfNodeNote::before,
.rfNodeNote::after {
	display: none;
}

/* Size variants - base dimensions (can be overridden by inline styles) */
.rfNodeNote--xs {
	--base-width: 100px;
	--base-height: 80px;
	padding: var(--space-3);
}

.rfNodeNote--small {
	--base-width: 140px;
	--base-height: 100px;
	padding: var(--space-4);
}

.rfNodeNote--medium {
	--base-width: 208px;
	--base-height: 260px;
	padding: var(--space-4) var(--space-5);
}

.rfNodeNote--large {
	--base-width: 280px;
	--base-height: 200px;
	padding: var(--space-5);
}

.rfNodeNote--xl {
	--base-width: 360px;
	--base-height: 260px;
	padding: var(--space-6);
}

/* Special aspect ratio variants */
.rfNodeNote--tall {
	--base-width: 160px;
	--base-height: 240px;
	padding: var(--space-4) var(--space-5);
}

.rfNodeNote--wide {
	--base-width: 320px;
	--base-height: 160px;
	padding: var(--space-4) var(--space-5);
}

.rfNodeNote--square {
	--base-width: 180px;
	--base-height: 180px;
	padding: var(--space-4);
}

.rfNodeNote .react-flow__handle {
	z-index: 10;
}

.rfNodeNoteTitle {
	font-size: 16px;
	font-weight: 700;
	color: color-mix(in srgb, var(--text-primary) 96%, white);
	line-height: 1.15;
	letter-spacing: -0.01em;
	word-break: break-word;
	margin: 0;
	text-transform: none;
	letter-spacing: 0;
	display: -webkit-box;
	-webkit-box-orient: vertical;
	-webkit-line-clamp: 2;
	overflow: hidden;
	flex: 1;
}

.rfNodeNoteContent {
	font-size: 11px;
	color: color-mix(in srgb, var(--text-secondary) 70%, transparent);
	line-height: 1.32;
	word-break: break-word;
	font-family: var(--font-sans);
	flex: 1;
	overflow: hidden;
	position: relative;
	-webkit-mask-image: linear-gradient(
		to bottom,
		rgba(0, 0, 0, 1) 65%,
		rgba(0, 0, 0, 0) 100%
	);
	mask-image: linear-gradient(
		to bottom,
		rgba(0, 0, 0, 1) 65%,
		rgba(0, 0, 0, 0) 100%
	);
}

.canvasNotePreview {
	height: 100%;
	overflow: hidden;
	pointer-events: none;
}

.canvasNotePreviewContent {
	margin: 0;
	padding: 0;
	outline: none;
	font-size: 11px;
	line-height: 1.32;
	color: inherit;
}

.canvasNotePreviewContent p {
	margin: 0 0 0.28rem;
}

.canvasNotePreviewContent p:last-child {
	margin-bottom: 0;
}

.canvasNotePreviewContent h1,
.canvasNotePreviewContent h2,
.canvasNotePreviewContent h3 {
	margin: 0.32rem 0 0.2rem;
	line-height: 1.25;
	font-weight: 700;
	color: color-mix(in srgb, var(--text-primary) 92%, white);
}

.canvasNotePreviewContent h1 {
	font-size: 13px;
}

.canvasNotePreviewContent h2 {
	font-size: 12px;
}

.canvasNotePreviewContent h3 {
	font-size: 11.5px;
}

.canvasNotePreviewContent ul,
.canvasNotePreviewContent ol {
	margin: 0.2rem 0 0.28rem 0.9rem;
	padding: 0;
}

.canvasNotePreviewContent li {
	margin: 0;
}

.canvasNotePreviewContent blockquote {
	margin: 0.25rem 0;
	padding: 0.2rem 0.45rem;
	border-left: 3px solid color-mix(in srgb, var(--interactive-accent) 72%, transparent);
	background: color-mix(in srgb, var(--interactive-accent) 9%, transparent);
	border-radius: 6px;
	color: color-mix(in srgb, var(--text-primary) 82%, var(--interactive-accent));
}

.canvasNotePreviewContent pre,
.canvasNotePreviewContent code {
	font-family: var(--font-mono);
	font-size: 11px;
}

.canvasNotePreviewContent pre {
	margin: 0.35rem 0;
	padding: 0.35rem 0.45rem;
	border-radius: 6px;
	background: color-mix(in srgb, var(--bg-secondary) 82%, transparent);
	overflow: hidden;
}

.canvasNotePreviewFallback {
	white-space: pre-line;
}
